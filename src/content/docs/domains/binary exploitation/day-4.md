---
title: "Day 4: The Stack, Local Variables, and Buffer Overflows"
description: Understanding the stack and how buffer overflows work
---

### The Stack

The stack is a region of memory used for storing local variables, function parameters, and return addresses. Understanding the stack's structure is key to exploiting vulnerabilities like buffer overflows.

### Local Variables and Buffers

Local variables and buffers are often stored on the stack. A buffer overflow occurs when data written to a buffer exceeds its allocated space, potentially overwriting adjacent memory, including other local variables and the return address. This can lead to unintended behavior and vulnerabilities.

#### Theory

<details>
<summary>The Stack Explained</summary>

> Objective: Understand how the stack works.

> > The Stack and Function Calls: [Read Here](https://www.linux.com/training-tutorials/stack-vs-heap-whats-difference-and-why-should-i-care/)

The stack operates in a Last-In-First-Out (LIFO) manner, growing and shrinking as functions are called and return. Understanding stack frames, how function parameters and return addresses are handled, and where local variables are stored is critical for exploiting buffer overflows.

</details>

<details>
<summary>Buffer Overflows in Detail</summary>

> Objective: Learn how buffer overflows can overwrite adjacent memory.

> > Buffer Overflow Vulnerabilities: [Read Here](https://0xrick.github.io/binary-exploitation/bof2/)

Buffer overflows are a common vulnerability that occurs when more data is written to a buffer than it can hold, causing it to overwrite adjacent memory. This can lead to arbitrary code execution if the overflowed data overwrites the return address or other critical control data.

</details>

#### Practice

<details>
<summary>Hands-On Exercise</summary>

> > **Visualize the stack:** Use GDB to examine the stack and observe how local variables are stored. Pay attention to how the stack changes during function calls and returns.
> > **Experiment with buffer overflows:** Write a C program with a vulnerable buffer (e.g., using `gets()` or `strcpy()` without bounds checking) and try to overflow it to change the value of another local variable. Use GDB to step through the program and observe the effects of the overflow.
> > **Simulate a Stack Overflow:** Write a program that recursively calls a function without a base case to cause a stack overflow, and use GDB to analyze the stack before the crash.
</details>
